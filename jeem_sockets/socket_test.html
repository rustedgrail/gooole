<html>
  <head>
    <script>
      var host = 'localhost';
      var port = '8888';
      var uri = '';
 
      ws = new WebSocket("ws://" + host + ":" + port + uri);
      ws.onmessage = function(evt) {alert("message received: " + evt.data)};
      ws.onclose = function(evt) { alert("Connection close"); };

	  	function publish() {
			var v = document.getElementById('publish_string');
			var message = { 'event': 'publish', 'parameters': {'message': v.value} }
			alert('sending '+JSON.stringify(message));
			ws.send(JSON.stringify(message));
		}
		
		function close_conn() { ws.close();}
    </script>
  </head>

	<body>
		<input type='text' value='' id='publish_string' />
		<input type='button' value='publish' name='publish' id='publish' onclick='publish();'/>
		
		<input type='button' value='close' name='close' id='close' onclick='close_conn();'/>
	</body>
</html>
